# KIE AI –ú–æ–¥–µ–ª–∏ –∏ –¶–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ

## üìö –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

**–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ü–µ–Ω KIE AI:**
- URL: https://kie.ai (—Ä–∞–∑–¥–µ–ª Models Pricing)
- –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 2025-12-21
- –í—Å–µ –º–æ–¥–µ–ª–∏ –∏ —Ä–µ–∂–∏–º—ã –∏–∑ —Ç–∞–±–ª–∏—Ü—ã "Our Price"

## üí∞ –ü—Ä–∞–≤–∏–ª–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

### –§–æ—Ä–º—É–ª–∞

```
–¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö = official_usd √ó USD_TO_RUB √ó PRICE_MULTIPLIER
```

–ì–¥–µ:
- `official_usd` ‚Äî "Our Price" –∏–∑ —Ç–∞–±–ª–∏—Ü—ã KIE AI (–≤ USD)
- `USD_TO_RUB` ‚Äî –∫—É—Ä—Å –¥–æ–ª–ª–∞—Ä–∞ –∫ —Ä—É–±–ª—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100.0, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `USD_TO_RUB` env)
- `PRICE_MULTIPLIER` ‚Äî –º–Ω–æ–∂–∏—Ç–µ–ª—å —Ü–µ–Ω—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2.0, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `PRICE_MULTIPLIER` env)

**–í–∞–∂–Ω–æ:** –ú–Ω–æ–∂–∏—Ç–µ–ª—å √ó2 –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è **–≤—Å–µ–≥–¥–∞** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è.

### –ü—Ä–∏–º–µ—Ä

–ú–æ–¥–µ–ª—å: `flux-2/pro-text-to-image`
- `official_usd = 0.025` (Our Price –∏–∑ —Ç–∞–±–ª–∏—Ü—ã)
- `USD_TO_RUB = 100.0`
- `PRICE_MULTIPLIER = 2.0`
- **–¶–µ–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** `0.025 √ó 100.0 √ó 2.0 = 5‚ÇΩ`

## üìÅ –ö–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π

**Source of Truth:** `app/kie_catalog/models_pricing.yaml`

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```yaml
models:
  - id: model_id              # ID –º–æ–¥–µ–ª–∏ –¥–ª—è KIE API
    title_ru: –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏  # –ö–∞–∫ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    type: t2i                  # –¢–∏–ø: t2i, i2i, t2v, i2v, v2v, tts, stt, sfx, audio_isolation, upscale, bg_remove, watermark_remove, music, lip_sync
    modes:
      - unit: image            # –ï–¥–∏–Ω–∏—Ü–∞: image, video, second, minute, 1000_chars, request, megapixel, removal, upscale
        credits: 14.0          # –ö—Ä–µ–¥–∏—Ç—ã –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
        official_usd: 0.07      # Our Price –≤ USD
        notes: "1.0s-1K"        # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–µ–∂–∏–º–∞
```

## ‚ûï –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å

–î–æ–±–∞–≤—å—Ç–µ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É –≤ `app/kie_catalog/models_pricing.yaml`:

```yaml
- id: new-model-id
  title_ru: –ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
  type: t2i
  modes:
    - unit: image
      credits: 10.0
      official_usd: 0.05
      notes: "default"
```

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É: `python scripts/verify_catalog.py`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –∫–∞—Ç–∞–ª–æ–≥–∞:

```bash
python scripts/verify_catalog.py
```

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è:
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–µ–π `model_id`
- ‚úÖ –í—Å–µ `official_usd > 0`
- ‚úÖ –í—Å–µ `type` –∏–∑ allowlist
- ‚úÖ –í—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ –º–æ–¥–µ–ª–µ–π:** 70
- **–í—Å–µ–≥–æ —Ä–µ–∂–∏–º–æ–≤:** 214
- **–¢–∏–ø—ã –º–æ–¥–µ–ª–µ–π:** t2i, i2i, t2v, i2v, v2v, tts, stt, sfx, audio_isolation, upscale, bg_remove, watermark_remove, music, lip_sync

## üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```python
from app.kie_catalog import get_model, list_models
from app.services.pricing_service import price_for_model_rub
from app.config import get_settings

# –ü–æ–ª—É—á–∏—Ç—å –º–æ–¥–µ–ª—å
model = get_model("flux-2/pro-text-to-image")

# –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ü–µ–Ω—É
settings = get_settings()
price_rub = price_for_model_rub("flux-2/pro-text-to-image", 0, settings)
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏

Environment variables:
- `USD_TO_RUB=100.0` ‚Äî –∫—É—Ä—Å –¥–æ–ª–ª–∞—Ä–∞ –∫ —Ä—É–±–ª—é
- `PRICE_MULTIPLIER=2.0` ‚Äî –º–Ω–æ–∂–∏—Ç–µ–ª—å —Ü–µ–Ω—ã

## üìù –í–∞–∂–Ω–æ

- **Source of Truth:** `app/kie_catalog/models_pricing.yaml` ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã
- **–í—Å–µ —Ü–µ–Ω—ã:** —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `app/services/pricing_service.py`
- **–°–ø–∏—Å–∞–Ω–∏–µ:** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å—Ç—Ä–æ–≥–æ –ø–æ —Ü–µ–Ω–µ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- **–ú–Ω–æ–∂–∏—Ç–µ–ª—å √ó2:** –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞

