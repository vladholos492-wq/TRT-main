# Branch Policy

## üî¥ –ì–õ–ê–í–ù–û–ï –ü–†–ê–í–ò–õ–û

**main ‚Äî –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–∞–≤–¥–∞. –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–¥—É—Ç –Ω–∞–ø—Ä—è–º—É—é –≤ main.**

## –ü–æ–ª–∏—Ç–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –≤–µ—Ç–∫–∞–º–∏

### ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–æ

- **–ü—Ä—è–º—ã–µ –∫–æ–º–º–∏—Ç—ã –≤ `main`** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± —Ä–∞–±–æ—Ç—ã
- **Pull Requests** ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Ç—Ä–µ–±—É—é—â–∏—Ö —Ä–µ–≤—å—é
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–µ—Ç–∫–∏** ‚Äî –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ (—É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ merge)

### ‚ùå –ó–∞–ø—Ä–µ—â–µ–Ω–æ

- –î–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ feature –≤–µ—Ç–∫–∏
- –í–µ—Ç–∫–∏ –±–µ–∑ merge –≤ main –±–æ–ª–µ–µ 1 –Ω–µ–¥–µ–ª–∏
- Force push –≤ main (–∫—Ä–æ–º–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

## Workflow

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å main
git pull origin main

# 2. –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
# ... —Ä–∞–±–æ—Ç–∞ ...

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
python -m compileall -q .
pytest -q

# 4. –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏ –∑–∞–ø—É—à–∏—Ç—å
git add .
git commit -m "feat: –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main
```

### –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (PR)

```bash
# 1. –°–æ–∑–¥–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—É—é –≤–µ—Ç–∫—É
git checkout -b fix/critical-issue

# 2. –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å
# ... —Ä–∞–±–æ—Ç–∞ ...

# 3. –ó–∞–ø—É—à–∏—Ç—å –≤–µ—Ç–∫—É
git push origin fix/critical-issue

# 4. –°–æ–∑–¥–∞—Ç—å PR —á–µ—Ä–µ–∑ GitHub UI
# 5. –ü–æ—Å–ª–µ merge ‚Äî —É–¥–∞–ª–∏—Ç—å –≤–µ—Ç–∫—É
git branch -d fix/critical-issue
git push origin --delete fix/critical-issue
```

## –û—á–∏—Å—Ç–∫–∞ –≤–µ—Ç–æ–∫

### –£–¥–∞–ª–µ–Ω–∏–µ remote –≤–µ—Ç–æ–∫

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ remote –≤–µ—Ç–∫–∏
git branch -r

# –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –≤–µ—Ç–∫—É
git push origin --delete branch-name

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤–µ—Ç–∫–∏ –∫—Ä–æ–º–µ main (—á–µ—Ä–µ–∑ gh cli)
gh pr list --state all --json headRefName | jq -r '.[].headRefName' | xargs -I {} gh pr close {} --delete-branch
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞

–°—Ç–∞—Ä—ã–µ –≤–µ—Ç–∫–∏ (>1 –Ω–µ–¥–µ–ª–∏ –±–µ–∑ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–¥–∞–ª–µ–Ω—ã.

## –ò—Å–∫–ª—é—á–µ–Ω–∏—è

- **main** ‚Äî –∑–∞—â–∏—â–µ–Ω–∞, –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞
- **gh-pages** ‚Äî –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- –í–µ—Ç–∫–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º `backup/` ‚Äî —Ç–æ–ª—å–∫–æ –¥–ª—è –∞—Ä—Ö–∏–≤–∞—Ü–∏–∏

## –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞

–ü–µ—Ä–µ–¥ push –≤ main:

1. ‚úÖ `python -m compileall -q .` ‚Äî –Ω–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
2. ‚úÖ `pytest -q` ‚Äî –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
3. ‚úÖ –ù–µ—Ç merge markers (`<<<<<<<`, `=======`, `>>>>>>>`)
4. ‚úÖ –ù–µ—Ç `print()` –≤–Ω–µ tests
5. ‚úÖ –°–µ–∫—Ä–µ—Ç—ã –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ª–æ–≥–∏

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

- **2025-01-07**: –°–æ–∑–¥–∞–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ –≤–µ—Ç–æ–∫
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –ê–∫—Ç–∏–≤–Ω–æ

