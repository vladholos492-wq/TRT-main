# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è grok-imagine/upscale

## üìã –û–±–∑–æ—Ä

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –º–æ–¥–µ–ª–∏ `grok-imagine/upscale` —Å–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ KIE AI API.

**–í–ê–ñ–ù–û**: –≠—Ç–∞ –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å `task_id` –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π KIE AI, –∞ –Ω–µ —Å –ø—Ä—è–º—ã–º–∏ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π!

## üîó API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **URL —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏**: `POST https://api.kie.ai/api/v1/jobs/createTask`
- **URL —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á–∏**: `GET https://api.kie.ai/api/v1/jobs/recordInfo?taskId={taskId}`
- **–ú–æ–¥–µ–ª—å**: `grok-imagine/upscale`

## üìù –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
|----------|-----|----------|-------------|
| `model` | string | ID –º–æ–¥–µ–ª–∏ | `"grok-imagine/upscale"` |
| `input.task_id` | string | Task ID –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ KIE AI | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, –º–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤ |

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------|-----|----------|----------------------|
| `callBackUrl` | string | URL –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ | –ù–µ —É–∫–∞–∑–∞–Ω (–Ω–µ—Ç callback) |

### –î–æ–ø—É—Å—Ç–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è

#### `task_id`
- –¢–∏–ø: string
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π: –¥–∞
- –ú–∞–∫—Å–∏–º—É–º: 100 —Å–∏–º–≤–æ–ª–æ–≤
- **–í–∞–∂–Ω–æ**: –î–æ–ª–∂–µ–Ω –±—ã—Ç—å task_id –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ KIE AI (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç `grok-imagine/text-to-image`, `grok-imagine/image-to-video`, `grok-imagine/text-to-video`)!
- **–í–∞–∂–Ω–æ**: –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä—è–º—ã–µ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π! –¢–æ–ª—å–∫–æ task_id –æ—Ç KIE AI!

## üîß –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ

### –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `app/services/kie_input_builder.py`:

```python
def _validate_grok_imagine_upscale(
    model_id: str,
    normalized_input: Dict[str, Any]
) -> Tuple[bool, Optional[str]]:
    """
    –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è grok-imagine/upscale —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API.
    
    –í–ê–ñ–ù–û: –≠—Ç–∞ –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å task_id –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π KIE AI,
    –∞ –Ω–µ —Å –ø—Ä—è–º—ã–º–∏ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π!
    """
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ–±–∞ –≤–æ–∑–º–æ–∂–Ω—ã—Ö ID –º–æ–¥–µ–ª–∏
    if model_id not in ["grok-imagine/upscale", "grok/imagine-upscale"]:
        return True, None
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è task_id: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, –º–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤
    task_id = normalized_input.get('task_id')
    if not task_id:
        return False, "–ü–æ–ª–µ 'task_id' –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∞–ø—Å–∫–µ–π–ª–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ task_id –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ KIE AI (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç grok-imagine/text-to-image)"
    
    task_id = task_id.strip()
    if len(task_id) == 0:
        return False, "–ü–æ–ª–µ 'task_id' –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º"
    if len(task_id) > 100:
        return False, f"–ü–æ–ª–µ 'task_id' —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ: {len(task_id)} —Å–∏–º–≤–æ–ª–æ–≤ (–º–∞–∫—Å–∏–º—É–º 100)"
    
    normalized_input['task_id'] = task_id
    
    # –í–ê–ñ–ù–û: –≠—Ç–∞ –º–æ–¥–µ–ª—å –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç image_url, image_base64 –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã!
    # –¢–æ–ª—å–∫–æ task_id –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π KIE AI
    
    return True, None
```

### –°—Ö–µ–º–∞ –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

–í `app/kie_catalog/input_schemas.py` –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `task_id` –≤ —Å—Ö–µ–º—É `upscale`:

```python
# Upscale
'upscale': {
    'image_url',
    'image_base64',
    'image',
    'scale',
    'upscale_factor',
    'model',
    'quality',
    'task_id'  # –î–ª—è grok-imagine/upscale (—Ç–æ–ª—å–∫–æ KIE AI task_id)
},
```

### Callback URL

Callback URL –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `KIE_CALLBACK_URL`:

```python
def get_callback_url() -> Optional[str]:
    """
    –ü–æ–ª—É—á–∞–µ—Ç callback URL –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫.
    """
    settings = get_settings()
    callback_url = getattr(settings, 'kie_callback_url', None)
    if not callback_url:
        import os
        callback_url = os.getenv('KIE_CALLBACK_URL')
    return callback_url
```

## üìä –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Workflow: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –ê–ø—Å–∫–µ–π–ª

#### –®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

```json
{
  "model": "grok-imagine/text-to-image",
  "input": {
    "prompt": "Cinematic portrait of a woman sitting by a vinyl record player",
    "aspect_ratio": "3:2"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "taskId": "281e5b0*********************f39b9"
  }
}
```

#### –®–∞–≥ 2: –ê–ø—Å–∫–µ–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É—è task_id –∏–∑ —à–∞–≥–∞ 1)

```json
{
  "model": "grok-imagine/upscale",
  "input": {
    "task_id": "281e5b0*********************f39b9"
  },
  "callBackUrl": "https://your-domain.com/api/callback"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "code": 200,
  "msg": "success",
  "data": {
    "taskId": "281e5b0*********************f39b9"
  }
}
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è task_id**: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–ª–∏–Ω–∞ (–º–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤) - –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π!
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞**: task_id –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ—Ç—ã**: task_id –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º
4. **Callback URL**: –ü–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤ API –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

## üîç –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è (–±–µ–∑ —Å–µ–∫—Ä–µ—Ç–æ–≤):

```
MODEL=grok-imagine/upscale TYPE=upscale INPUT_KEYS=['task_id'] 
INPUT_PREVIEW={'task_id': '281e5b0*********************f39b9'}
```

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `app/services/kie_input_builder.py` - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `app/kie_catalog/input_schemas.py` - –°—Ö–µ–º—ã –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- `app/integrations/kie_client.py` - KIE API –∫–ª–∏–µ–Ω—Ç
- `app/kie_catalog/models_pricing.yaml` - –ö–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π –∏ —Ü–µ–Ω

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **task_id –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π** - –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∞–ø—Å–∫–µ–π–ª–∞
2. **task_id –º–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
3. **–¢–æ–ª—å–∫–æ KIE AI task_id** - –º–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å task_id –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π KIE AI (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç `grok-imagine/text-to-image`, `grok-imagine/image-to-video`, `grok-imagine/text-to-video`)
4. **–ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä—è–º—ã–µ URL** - –º–æ–¥–µ–ª—å –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `image_url`, `image_base64` –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø—Ä—è–º—ã—Ö URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π!
5. **Workflow**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å KIE AI, –ø–æ–ª—É—á–∏—Ç—å `taskId`, –∞ –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç `taskId` –¥–ª—è –∞–ø—Å–∫–µ–π–ª–∞
6. **Callback URL –æ–ø—Ü–∏–æ–Ω–∞–ª–µ–Ω** - –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è

## üîÑ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ upscale –º–æ–¥–µ–ª—è–º–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | topaz/image-upscale | grok-imagine/upscale |
|----------|---------------------|----------------------|
| `image_url` / `image_input` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π (URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) | –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| `upscale_factor` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π ("1", "2", "4", "8") | –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| `task_id` | –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π (—Ç–æ–ª—å–∫–æ KIE AI task_id) |
| –ò—Å—Ç–æ—á–Ω–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | –ü—Ä—è–º–æ–π URL | Task ID –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ KIE AI |
| –¢–∏–ø –º–æ–¥–µ–ª–∏ | upscale | upscale |

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å grok-imagine/text-to-image

| –ü–∞—Ä–∞–º–µ—Ç—Ä | grok-imagine/text-to-image | grok-imagine/upscale |
|----------|----------------------------|----------------------|
| `prompt` | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π, max 5000 | –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| `aspect_ratio` | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π, 3 –∑–Ω–∞—á–µ–Ω–∏—è | –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è |
| `task_id` | –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π (—Ç–æ–ª—å–∫–æ KIE AI task_id) |
| –¢–∏–ø –º–æ–¥–µ–ª–∏ | t2i | upscale |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è | –ê–ø—Å–∫–µ–π–ª —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—á–µ—Ä–µ–∑ task_id) |

## üéØ –ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è

1. **–¢–æ–ª—å–∫–æ task_id**: –ú–æ–¥–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å `task_id` –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π KIE AI
2. **–ù–µ—Ç –ø—Ä—è–º—ã—Ö URL**: –ú–æ–¥–µ–ª—å –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `image_url`, `image_base64` –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –ø—Ä—è–º—ã—Ö URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. **Workflow –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω —Å–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –¥—Ä—É–≥—É—é –º–æ–¥–µ–ª—å KIE AI, –ø–æ–ª—É—á–∏—Ç—å `taskId`, –∞ –∑–∞—Ç–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç `taskId` –¥–ª—è –∞–ø—Å–∫–µ–π–ª–∞
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª–∏–Ω—ã**: `task_id` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –º–∞–∫—Å–∏–º—É–º 100 —Å–∏–º–≤–æ–ª–æ–≤
5. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä**: `task_id` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è –∞–ø—Å–∫–µ–π–ª–∞
6. **–°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**: –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è task_id –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

## üîÑ Workflow –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ workflow:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ**:
   ```
   POST /api/v1/jobs/createTask
   {
     "model": "grok-imagine/text-to-image",
     "input": {
       "prompt": "Beautiful landscape",
       "aspect_ratio": "3:2"
     }
   }
   ```
   –ü–æ–ª—É—á–∞–µ—Ç: `taskId = "abc123..."`

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏**:
   ```
   GET /api/v1/jobs/recordInfo?taskId=abc123...
   ```
   –ü–æ–ª—É—á–∞–µ—Ç: `state = "success"`, `resultUrls = ["https://..."]`

3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–µ–ª–∞–µ—Ç –∞–ø—Å–∫–µ–π–ª**:
   ```
   POST /api/v1/jobs/createTask
   {
     "model": "grok-imagine/upscale",
     "input": {
       "task_id": "abc123..."  // –ò—Å–ø–æ–ª—å–∑—É–µ—Ç taskId –∏–∑ —à–∞–≥–∞ 1
     }
   }
   ```
   –ü–æ–ª—É—á–∞–µ—Ç: `taskId = "xyz789..."`

4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–ø—Å–∫–µ–π–ª–∞**:
   ```
   GET /api/v1/jobs/recordInfo?taskId=xyz789...
   ```
   –ü–æ–ª—É—á–∞–µ—Ç: `state = "success"`, `resultUrls = ["https://..."]` (–∞–ø—Å–∫–µ–π–ª–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

1. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ task_id**: –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ `taskId` –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–ø—Å–∫–µ–π–ª–∞
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å—Ö–æ–¥–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —É—Å–ø–µ—à–Ω–æ (`state = "success"`) –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `task_id` –¥–ª—è –∞–ø—Å–∫–µ–π–ª–∞
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ callback**: –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ workflow –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `callBackUrl` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ `task_id` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –Ω–µ—É—Å–ø–µ—à–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

