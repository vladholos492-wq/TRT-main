# üöÄ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –Ω–∞ Timeweb

–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –∑–∞–ø—É—Å–∫–∞:
1. **Python –≤–µ—Ä—Å–∏—è** (–æ—Å–Ω–æ–≤–Ω–∞—è, —á–µ—Ä–µ–∑ Node.js wrapper)
2. **Node.js –≤–µ—Ä—Å–∏—è** (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è)

## üì¶ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –Ω–∞ Timeweb

### ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –ø–∞–Ω–µ–ª–∏ Timeweb

–ü—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –¥–µ–ø–ª–æ—è –≤ –ø–∞–Ω–µ–ª–∏ Timeweb:

**–ö–æ–º–∞–Ω–¥–∞ —Å–±–æ—Ä–∫–∏ (Build Command):**
- –û—Å—Ç–∞–≤—å—Ç–µ **–ü–£–°–¢–´–ú** –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ: `npm ci`
- ‚ùå **–ù–ï —É–∫–∞–∑—ã–≤–∞–π—Ç–µ:** `npm run build` (—ç—Ç–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–µ—Ç!)

**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ (Run Command):**
- –û—Å—Ç–∞–≤—å—Ç–µ **–ü–£–°–¢–´–ú** –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ: `npm start`
- Timeweb –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CMD ["npm", "start"]` –∏–∑ Dockerfile

**–û–∫—Ä—É–∂–µ–Ω–∏–µ (Environment):**
- –í—ã–±–µ—Ä–∏—Ç–µ: `Node.js`

**–§—Ä–µ–π–º–≤–æ—Ä–∫ (Framework):**
- –í—ã–±–µ—Ä–∏—Ç–µ: `Nest` (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π, –Ω–µ –≤–∞–∂–Ω–æ)

**–í–µ—Ä—Å–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è (Environment Version):**
- –í—ã–±–µ—Ä–∏—Ç–µ: `24` (–∏–ª–∏ –ø–æ—Å–ª–µ–¥–Ω—é—é –¥–æ—Å—Ç—É–ø–Ω—É—é)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Node.js (npm start) - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

1. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä**
   ```bash
   # –ß–µ—Ä–µ–∑ WinSCP –∏–ª–∏ SCP —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫—É, –Ω–∞–ø—Ä–∏–º–µ—Ä: /home/user/bot
   ```

2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH**

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   cd /home/user/bot
   npm install
   ```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ Timeweb**
   - –ó–∞–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Timeweb
   - –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è" –∏–ª–∏ "Environment Variables"
   - –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
     ```
     TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
     KIE_API_KEY=–≤–∞—à_api_–∫–ª—é—á
     KIE_API_URL=https://api.kie.ai
     ADMIN_ID=–≤–∞—à_telegram_id
     ```
   - –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø–∫–µ –±–æ—Ç–∞ (–µ—Å–ª–∏ –ø–∞–Ω–µ–ª—å –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)

5. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
   ```bash
   sudo apt-get update
   sudo apt-get install python3 python3-pip -y
   pip3 install -r requirements.txt
   ```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
   ```bash
   npm start
   ```

7. **–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PM2 –∏–ª–∏ screen**
   
   **–ß–µ—Ä–µ–∑ PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
   ```bash
   npm install -g pm2
   pm2 start npm --name "kie-bot" -- start
   pm2 save
   pm2 startup
   ```
   
   **–ß–µ—Ä–µ–∑ screen:**
   ```bash
   screen -S kie-bot
   npm start
   # –û—Ç–∫–ª—é—á–∏—Ç–µ—Å—å: Ctrl+A, –∑–∞—Ç–µ–º D
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Python –Ω–∞–ø—Ä—è–º—É—é

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   sudo apt-get update
   sudo apt-get install python3 python3-pip -y
   pip3 install -r requirements.txt
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª**
   ```bash
   nano .env
   ```
   –í—Å—Ç–∞–≤—å—Ç–µ:
   ```
   TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω
   KIE_API_KEY=–≤–∞—à_–∫–ª—é—á
   KIE_API_URL=https://api.kie.ai
   ADMIN_ID=–≤–∞—à_id
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞**
   ```bash
   python3 run_bot.py
   ```

4. **–î–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ systemd**
   ```bash
   sudo cp kie-bot.service /etc/systemd/system/
   sudo nano /etc/systemd/system/kie-bot.service
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –ø—É—Ç–∏ –≤ —Ñ–∞–π–ª–µ
   sudo systemctl daemon-reload
   sudo systemctl enable kie-bot
   sudo systemctl start kie-bot
   sudo systemctl status kie-bot
   ```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞ Timeweb

### ‚ö†Ô∏è –í–ê–ñ–ù–û: .env —Ñ–∞–π–ª—ã –ù–ï –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ GitHub!

–§–∞–π–ª `.gitignore` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω, —á—Ç–æ–±—ã `.env` —Ñ–∞–π–ª—ã –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.env.example` –∫–∞–∫ —à–∞–±–ª–æ–Ω (–æ–Ω –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è GitHub).

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Timeweb (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
- –ó–∞–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞/–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏ Timeweb
- –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è" –∏–ª–∏ "Environment Variables"
- –î–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (—Å–º. —Å–ø–∏—Å–æ–∫ –Ω–∏–∂–µ)
- **–ù–ï –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ —Ñ–∞–π–ª .env** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–∞–Ω–µ–ª–∏!

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ —Ñ–∞–π–ª .env
```bash
cd /home/user/bot
nano .env
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–∑ .env.example –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ
```

## üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**üìÑ –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏:** —Å–º. —Ñ–∞–π–ª `TIMEWEB_ENV_VARIABLES.txt`

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ (2 —à—Ç):
- `TELEGRAM_BOT_TOKEN` - —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
- `KIE_API_KEY` - API –∫–ª—é—á –æ—Ç https://api.kie.ai

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å —É–º–æ–ª—á–∞–Ω–∏—è–º–∏ (3 —à—Ç):
- `KIE_API_URL` - URL API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: https://api.kie.ai)
- `KIE_TIMEOUT_SECONDS` - —Ç–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30)
- `ADMIN_ID` - –≤–∞—à Telegram ID (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 6913446846)

### –î–ª—è –æ–ø–ª–∞—Ç—ã (3 —à—Ç, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- `PAYMENT_CARD_HOLDER` - –∏–º—è –ø–æ–ª—É—á–∞—Ç–µ–ª—è –ø–ª–∞—Ç–µ–∂–∞
- `PAYMENT_PHONE` - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–ª—è –°–ë–ü
- `PAYMENT_BANK` - –Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞

### –î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (2 —à—Ç, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- `SUPPORT_TELEGRAM` - –∫–æ–Ω—Ç–∞–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- `SUPPORT_TEXT` - —Ç–µ–∫—Å—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**üí° –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä:** –¢–æ–ª—å–∫–æ `TELEGRAM_BOT_TOKEN` –∏ `KIE_API_KEY` (–æ—Å—Ç–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PM2
   pm2 logs kie-bot
   
   # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ systemd
   sudo journalctl -u kie-bot -f
   
   # –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ screen
   screen -r kie-bot
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Telegram:**
   - –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
   - –ë–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—Ç–∏—Ç—å

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Python 3 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `python3 --version`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: `pip3 list | grep telegram`
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏

### –ë–æ—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PM2 –∏–ª–∏ systemd –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

### –û—à–∏–±–∫–∞ "Python not found"
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python: `sudo apt-get install python3`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Python –≤ PATH: `which python3`

### –û—à–∏–±–∫–∞ "Module not found"
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip3 install -r requirements.txt`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–∞–ø–∫–µ

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- **–û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª:** `index.js` (–∑–∞–ø—É—Å–∫–∞–µ—Ç Python –≤–µ—Ä—Å–∏—é)
- **Python –≤–µ—Ä—Å–∏—è:** `run_bot.py`
- **Node.js –≤–µ—Ä—Å–∏—è:** `mybot_new.js` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è)
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** `.env` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ –ø–∞–Ω–µ–ª–∏

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   pm2 stop kie-bot
   # –∏–ª–∏
   sudo systemctl stop kie-bot
   ```

2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã

3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
   ```bash
   npm install  # –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   pip3 install -r requirements.txt  # –µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   ```

4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
   ```bash
   pm2 restart kie-bot
   # –∏–ª–∏
   sudo systemctl start kie-bot
   ```

---

**–£–¥–∞—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã! üöÄ**


