# üöÄ TRT (KIE –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä) ‚Äî –¥–µ–ø–ª–æ–π –Ω–∞ Render

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∑–∞—Ç–æ—á–µ–Ω –ø–æ–¥ **Render Web Service + Telegram Webhook**.
–¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: **`main_render.py`** (—Å–º. `Dockerfile`).

## ‚úÖ –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

- `GET /health` ‚Üí 200 (healthcheck Render / UptimeRobot)
- `GET /` ‚Üí 200 (–ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å –∂–∏–≤)
- `POST /webhook/<secret>` ‚Üí –≤—Ö–æ–¥—è—â–∏–µ –∞–ø–¥–µ–π—Ç—ã Telegram

## üîë –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ ENV –Ω–∞ Render

```env
ADMIN_ID=...
BOT_MODE=webhook
DATABASE_URL=...
DB_MAXCONN=15
KIE_API_KEY=...
PAYMENT_BANK=...
PAYMENT_CARD_HOLDER=...
PAYMENT_PHONE=...
PORT=10000
SUPPORT_TELEGRAM=...
SUPPORT_TEXT=...
TELEGRAM_BOT_TOKEN=...
WEBHOOK_BASE_URL=https://<your-service>.onrender.com
WEBHOOK_SECRET_TOKEN=...
```

### –ü—Ä–æ `WEBHOOK_SECRET_PATH`

- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è **–Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞**.
- –ï—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–∞, secret path **–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ `TELEGRAM_BOT_TOKEN`** (—É–±–∏—Ä–∞–µ–º `:` –∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–µ–∂–µ–º –¥–æ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 64 —Å–∏–º–≤–æ–ª–æ–≤).
- –≠—Ç–æ —Å–¥–µ–ª–∞–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –ª–æ–≤–∏—Ç—å ¬´—Ç–∏—Ö–∏–µ 404¬ª –Ω–∞ `/webhook/...` –ø—Ä–∏ —Å–º–µ–Ω–µ –∫–æ–¥–∞/–≤—Ö–æ–¥–Ω–æ–π —Ç–æ—á–∫–∏.

## üß† –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω –∑–∞–ø—É—Å–∫

- `main_render.py` –ø–æ–¥–Ω–∏–º–∞–µ—Ç aiohttp-—Å–µ—Ä–≤–µ—Ä –Ω–∞ `PORT`.
- –ï—Å–ª–∏ –∑–∞–¥–∞–Ω `DATABASE_URL`, –≤–∫–ª—é—á–∞–µ—Ç—Å—è **PostgreSQL advisory lock** (–∑–∞—â–∏—Ç–∞ –æ—Ç 2 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤).
- –ü—Ä–∏ rolling deploy –Ω–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –º–æ–∂–µ—Ç —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å —Ä–∞–Ω—å—à–µ —Å—Ç–∞—Ä–æ–≥–æ ‚Üí –æ–Ω –≤–æ–π–¥—ë—Ç –≤ **PASSIVE** –∏ –±—É–¥–µ—Ç **–∂–¥–∞—Ç—å**, –ø–æ–∫–∞ lock –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è, –ø–æ—Ç–æ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–µ—Ç ACTIVE.

## üß™ –ë—ã—Å—Ç—Ä—ã–π —Å–∞–º–æ—á–µ–∫

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è:

- –û—Ç–∫—Ä–æ–π `https://<your-service>.onrender.com/health` ‚Üí –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å **200**
- –ù–∞–ø–∏—à–∏ –±–æ—Ç—É `/start` ‚Üí –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å

