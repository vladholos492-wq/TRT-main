# ‚ö° –ë–´–°–¢–†–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –î–ï–ü–õ–û–Ø –ù–ê RENDER

## üéØ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### ‚úÖ 1. Port Scan Timeout
- **–ë—ã–ª–æ:** `type: web` (—Ç—Ä–µ–±—É–µ—Ç HTTP –ø–æ—Ä—Ç)
- **–°—Ç–∞–ª–æ:** `type: worker` (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ—Ä—Ç)
- **–§–∞–π–ª:** `render.yaml`

### ‚úÖ 2. 409 Conflict
- **–ë—ã–ª–æ:** Webhook –º–æ–≥ –æ—Å—Ç–∞—Ç—å—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º
- **–°—Ç–∞–ª–æ:** –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ webhook –ø–µ—Ä–µ–¥ polling
- **–§–∞–π–ª:** `bot_kie.py` (—Ñ—É–Ω–∫—Ü–∏—è `preflight_telegram()`)

### ‚úÖ 3. –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- **–°–æ–∑–¥–∞–Ω–æ:** `unlock_bot_token.sh` (Linux/Mac)
- **–°–æ–∑–¥–∞–Ω–æ:** `unlock_bot_token.ps1` (Windows)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–æ–∫–µ–Ω–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å 409)

**Windows PowerShell:**
```powershell
$env:BOT_TOKEN='your_token_here'
.\unlock_bot_token.ps1
```

**Linux/Mac:**
```bash
export BOT_TOKEN='your_token_here'
./unlock_bot_token.sh
```

### –®–∞–≥ 2: –ö–æ–º–º–∏—Ç –∏ –¥–µ–ø–ª–æ–π

```bash
git add render.yaml bot_kie.py unlock_bot_token.* RENDER_DEPLOY_FIX.md
git commit -m "Fix: Background Worker + webhook cleanup"
git push
```

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç!

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Render. –î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
‚úÖ Preflight check passed: ready to start polling
‚úÖ Webhook –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –≥–æ—Ç–æ–≤ –∫ polling
üöÄ Starting bot...
```

---

## ‚ö†Ô∏è –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë 409

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Render Dashboard:**
   - –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å —Å —Ç–æ–∫–µ–Ω–æ–º –±–æ—Ç–∞?
   - Instance count = 1?
   - –ù–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤?

2. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã:**
   - Suspend –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ Render
   - –ü–æ–¥–æ–∂–¥–∏—Ç–µ 30 —Å–µ–∫—É–Ω–¥
   - Resume —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–µ—Ä–≤–∏—Å

3. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Å–Ω–æ–≤–∞:**
   ```bash
   ./unlock_bot_token.sh  # –∏–ª–∏ .ps1 –¥–ª—è Windows
   ```

---

## üìã –ß–µ–∫-–ª–∏—Å—Ç

- [x] `render.yaml` –∏–∑–º–µ–Ω—ë–Ω –Ω–∞ `type: worker`
- [x] –ö–æ–¥ —É–ª—É—á—à–µ–Ω: `preflight_telegram()` –¥–æ–±–∞–≤–ª–µ–Ω
- [x] –°–∫—Ä–∏–ø—Ç—ã —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Å–æ–∑–¥–∞–Ω—ã
- [ ] –¢–æ–∫–µ–Ω —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω (–µ—Å–ª–∏ –±—ã–ª 409)
- [ ] Render Dashboard –ø—Ä–æ–≤–µ—Ä–µ–Ω (–Ω–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
- [ ] –ö–æ–º–º–∏—Ç –∏ –ø—É—à –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

**–ì–æ—Ç–æ–≤–æ!** üéâ








