# ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–Ω—é –º–æ–¥–µ–ª–µ–π –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ - –ó–ê–í–ï–†–®–ï–ù–û

## üìã –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –°–æ–∑–¥–∞–Ω –∫–∞—Ç–∞–ª–æ–≥ –º–æ–¥–µ–ª–µ–π ‚úÖ
- `app/kie_catalog/models_pricing.yaml` - 70 –º–æ–¥–µ–ª–µ–π, 214 —Ä–µ–∂–∏–º–æ–≤
- `app/kie_catalog/catalog.py` - –ª–æ–∞–¥–µ—Ä –∫–∞—Ç–∞–ª–æ–≥–∞
- `app/kie_catalog/README_PRICING.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### 2. –°–æ–∑–¥–∞–Ω —Å–µ—Ä–≤–∏—Å —Ä–∞—Å—á—ë—Ç–∞ —Ü–µ–Ω ‚úÖ
- `app/services/pricing_service.py` - —Ä–∞—Å—á—ë—Ç —Ü–µ–Ω –ø–æ —Ñ–æ—Ä–º—É–ª–µ: `official_usd √ó USD_TO_RUB √ó PRICE_MULTIPLIER`

### 3. –û–±–Ω–æ–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚úÖ
- `app/config.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã `USD_TO_RUB` –∏ `PRICE_MULTIPLIER`

### 4. –°–æ–∑–¥–∞–Ω–æ –º–µ–Ω—é –º–æ–¥–µ–ª–µ–π ‚úÖ
- `app/helpers/models_menu.py` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ–Ω—é –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- `app/helpers/models_menu_handlers.py` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ callback'–æ–≤

### 5. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ bot_kie.py ‚úÖ
- –û–±–Ω–æ–≤–ª—ë–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `show_all_models_list` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `model:*` - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ —Å —Ü–µ–Ω–∞–º–∏

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ú–µ–Ω—é –º–æ–¥–µ–ª–µ–π
- ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º (t2i, i2v, t2v –∏ —Ç.–¥.)
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –±—Ä–µ–Ω–¥–∞–º –≤–Ω—É—Ç—Ä–∏ —Ç–∏–ø–æ–≤
- ‚úÖ –¶–µ–Ω—ã –≤ —Ä—É–±–ª—è—Ö (√ó2) –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
- ‚úÖ Callback'–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `model:<model_id>` –∏–ª–∏ `modelk:<hash>` –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö ID

### –ö–∞—Ä—Ç–æ—á–∫–∞ –º–æ–¥–µ–ª–∏
- ‚úÖ –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
- ‚úÖ –¢–∏–ø –∏ —Ä–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –¶–µ–Ω–∞ –≤ —Ä—É–±–ª—è—Ö (‚ÇΩ)
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –≤ USD
- ‚úÖ –ö—Ä–µ–¥–∏—Ç—ã –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- ‚úÖ –ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è
- ‚úÖ –ö–Ω–æ–ø–∫–∏: "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å", "–ü—Ä–∏–º–µ—Ä", "–ù–∞–∑–∞–¥"

### –í–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ –ï—Å–ª–∏ –º–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è "–ú–æ–¥–µ–ª—å –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞"
- ‚úÖ –ù–µ –ø–∞–¥–∞–µ—Ç –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –º–æ–¥–µ–ª–∏
- ‚úÖ –í—Å–µ callback'–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
app/
‚îú‚îÄ‚îÄ kie_catalog/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ catalog.py              # –õ–æ–∞–¥–µ—Ä –∫–∞—Ç–∞–ª–æ–≥–∞
‚îÇ   ‚îú‚îÄ‚îÄ models_pricing.yaml     # Source of Truth (70 –º–æ–¥–µ–ª–µ–π, 214 —Ä–µ–∂–∏–º–æ–≤)
‚îÇ   ‚îî‚îÄ‚îÄ README_PRICING.md       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ pricing_service.py      # –†–∞—Å—á—ë—Ç —Ü–µ–Ω
‚îî‚îÄ‚îÄ helpers/
    ‚îú‚îÄ‚îÄ models_menu.py          # –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –º–µ–Ω—é
    ‚îî‚îÄ‚îÄ models_menu_handlers.py # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
```

## üîÑ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –∫–æ–¥–µ:

```python
from app.helpers.models_menu import build_models_menu_by_type
from app.kie_catalog import get_model
from app.services.pricing_service import price_for_model_rub
from app.config import get_settings

# –ü–æ—Å—Ç—Ä–æ–∏—Ç—å –º–µ–Ω—é
keyboard = build_models_menu_by_type('ru')

# –ü–æ–ª—É—á–∏—Ç—å –º–æ–¥–µ–ª—å
model = get_model("flux-2/pro-text-to-image")

# –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Ü–µ–Ω—É
settings = get_settings()
price_rub = price_for_model_rub("flux-2/pro-text-to-image", 0, settings)
```

## ‚úÖ Acceptance Criteria

- ‚úÖ –õ—é–±–∞—è –∫–Ω–æ–ø–∫–∞ –∏–∑ –º–µ–Ω—é –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∏—Å–∫–ª—é—á–µ–Ω–∏—é
- ‚úÖ –í—Å–µ –º–æ–¥–µ–ª–∏ –∏–∑ YAML —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- ‚úÖ –¶–µ–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ —Ä—É–±–ª—è—Ö (√ó2)
- ‚úÖ Callback'–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞–ª–∏—á–∏—è –º–æ–¥–µ–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ –º–æ–¥–µ–ª–µ–π –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:

```bash
python scripts/test_kie_catalog.py
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –í—Å–µ –º–æ–¥–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
2. –¶–µ–Ω—ã —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
3. –ú–µ–Ω—é —Å—Ç—Ä–æ–∏—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
4. Callback'–∏ —Ä–∞–∑—Ä–µ—à–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìù –í–∞–∂–Ω–æ

- **Source of Truth:** `app/kie_catalog/models_pricing.yaml`
- **–í—Å–µ —Ü–µ–Ω—ã:** —á–µ—Ä–µ–∑ `pricing_service.py`
- **–§–æ—Ä–º—É–ª–∞:** `price_rub = official_usd √ó USD_TO_RUB √ó PRICE_MULTIPLIER`
- **–ú–Ω–æ–∂–∏—Ç–µ–ª—å √ó2:** –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞

## üéâ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã. –ú–µ–Ω—é –º–æ–¥–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –Ω–æ–≤—ã–º –∫–∞—Ç–∞–ª–æ–≥–æ–º.

