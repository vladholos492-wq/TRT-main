# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ BB TT Scanner

## üìÅ –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
bb_tt_scanner/
‚îÇ
‚îú‚îÄ‚îÄ app/                          # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ main.py                  # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (async + Qt)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ gui/                      # GUI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (PySide6)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_window.py        # –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py             # –ú–æ–¥–µ–ª—å —Ç–∞–±–ª–∏—Ü—ã –º–∞—Ç—á–µ–π
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ scanner/                  # –°–∫–∞–Ω–µ—Ä (Playwright)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ browser.py            # –ú–µ–Ω–µ–¥–∂–µ—Ä –±—Ä–∞—É–∑–µ—Ä–∞ (persistent context)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scanner.py             # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–∞–Ω–µ—Ä (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ—Ä)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ engine/                   # –î–≤–∏–∂–æ–∫ (—Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ normalizer.py         # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ strategy.py            # –°—Ç—Ä–∞—Ç–µ–≥–∏—è TT_LIVE_V1 + P&L –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ storage/                  # –•—Ä–∞–Ω–∏–ª–∏—â–µ (SQLite)
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îî‚îÄ‚îÄ database.py           # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∂—É—Ä–Ω–∞–ª–∞ —Å–∏–≥–Ω–∞–ª–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ scripts/                      # –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ build_win.ps1             # –°–±–æ—Ä–∫–∞ .exe (PyInstaller)
‚îÇ   ‚îî‚îÄ‚îÄ make_desktop_shortcut.ps1 # –°–æ–∑–¥–∞–Ω–∏–µ —è—Ä–ª—ã–∫–∞ –Ω–∞ Desktop
‚îÇ
‚îú‚îÄ‚îÄ dist/                         # –ì–æ—Ç–æ–≤—ã–π .exe (–ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ BB_TT_Scanner.exe
‚îÇ
‚îú‚îÄ‚îÄ logs/                         # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ app.log
‚îÇ
‚îú‚îÄ‚îÄ bb_profile/                   # –ü—Ä–æ—Ñ–∏–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (—Å–µ—Å—Å–∏—è, —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îÇ   ‚îî‚îÄ‚îÄ (Playwright persistent context)
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ run.py                        # –ü—Ä–æ—Å—Ç–æ–π launcher
‚îú‚îÄ‚îÄ README.md                     # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ QUICK_START.md                # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ BUILD_INSTRUCTIONS.md         # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ
‚îú‚îÄ‚îÄ PROJECT_STRUCTURE.md          # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îî‚îÄ‚îÄ .gitignore                    # Git ignore –ø—Ä–∞–≤–∏–ª–∞
```

## üîÑ –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
1. BrowserManager (browser.py)
   ‚îî‚îÄ> –û—Ç–∫—Ä—ã–≤–∞–µ—Ç Playwright –±—Ä–∞—É–∑–µ—Ä
   ‚îî‚îÄ> –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç network responses
   ‚îî‚îÄ> –í—ã–∑—ã–≤–∞–µ—Ç network_callback

2. Scanner (scanner.py)
   ‚îî‚îÄ> –ü–æ–ª—É—á–∞–µ—Ç network –¥–∞–Ω–Ω—ã–µ
   ‚îî‚îÄ> –ü–µ—Ä–µ–¥–∞—ë—Ç –≤ EventNormalizer

3. EventNormalizer (normalizer.py)
   ‚îî‚îÄ> –ü–∞—Ä—Å–∏—Ç JSON (–∞–¥–∞–ø—Ç–∏–≤–Ω–æ)
   ‚îî‚îÄ> –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –≤ –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
   ‚îî‚îÄ> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π

4. Scanner
   ‚îî‚îÄ> –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ
   ‚îî‚îÄ> –ü–µ—Ä–µ–¥–∞—ë—Ç –≤ Strategy

5. TT_LIVE_V1_Strategy (strategy.py)
   ‚îî‚îÄ> –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è REVERSAL_NOT_END
   ‚îî‚îÄ> –í—ã—á–∏—Å–ª—è–µ—Ç P&L
   ‚îî‚îÄ> –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç Signal (–µ—Å–ª–∏ –µ—Å—Ç—å)

6. Scanner
   ‚îî‚îÄ> –ü—Ä–æ–≤–µ—Ä—è–µ—Ç cooldown
   ‚îî‚îÄ> –í—ã–∑—ã–≤–∞–µ—Ç on_signal callback

7. MainWindow (main_window.py)
   ‚îî‚îÄ> –ü–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª
   ‚îî‚îÄ> –û–±–Ω–æ–≤–ª—è–µ—Ç UI
   ‚îî‚îÄ> –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–ª–µ—Ä—Ç
   ‚îî‚îÄ> –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Database

8. Database (database.py)
   ‚îî‚îÄ> –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–∏–≥–Ω–∞–ª –≤ SQLite
```

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### Python –ø–∞–∫–µ—Ç—ã (requirements.txt):
- `playwright==1.40.0` - –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- `PySide6==6.6.1` - GUI —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `qasync==0.27.0` - Async –¥–ª—è Qt
- `loguru==0.7.2` - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- `pyinstaller==6.3.0` - –°–±–æ—Ä–∫–∞ .exe

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Windows 10/11
- Python 3.11+
- ~500 MB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (–¥–ª—è .exe —Å –±—Ä–∞—É–∑–µ—Ä–æ–º)

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. BrowserManager (`app/scanner/browser.py`)
- –£–ø—Ä–∞–≤–ª—è–µ—Ç Playwright –±—Ä–∞—É–∑–µ—Ä–æ–º
- Persistent context (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏)
- Network interception (–ø–µ—Ä–µ—Ö–≤–∞—Ç XHR/fetch)
- Auto-reconnect –ø—Ä–∏ —Å–±–æ—è—Ö

### 2. Scanner (`app/scanner/scanner.py`)
- –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç BrowserManager, Normalizer, Strategy
- –£–ø—Ä–∞–≤–ª—è–µ—Ç –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –∏ —Å–∏–≥–Ω–∞–ª—ã
- Cooldown –º–µ—Ö–∞–Ω–∏–∑–º

### 3. EventNormalizer (`app/engine/normalizer.py`)
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è —Ä–∞–∑–Ω—ã—Ö JSON —Å—Ç—Ä—É–∫—Ç—É—Ä
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç: match_id, players, score, odds, status
- –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ API

### 4. TT_LIVE_V1_Strategy (`app/engine/strategy.py`)
- –†–µ–∞–ª–∏–∑—É–µ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏—é REVERSAL_NOT_END
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —É—Å–ª–æ–≤–∏—è (diff, momentum, odds)
- –í—ã–±–∏—Ä–∞–µ—Ç MAIN –∏ HEDGE —Ä—ã–Ω–∫–∏
- –í—ã—á–∏—Å–ª—è–µ—Ç P&L –¥–ª—è –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### 5. MainWindow (`app/gui/main_window.py`)
- –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –¢–∞–±–ª–∏—Ü–∞ –º–∞—Ç—á–µ–π (QTableView)
- –ü–∞–Ω–µ–ª—å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞
- System tray –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

### 6. Database (`app/storage/database.py`)
- SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –ñ—É—Ä–Ω–∞–ª –≤—Å–µ—Ö —Å–∏–≥–Ω–∞–ª–æ–≤
- –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –°—Ç—Ä–∞—Ç–µ–≥–∏—è (StrategyConfig –≤ `strategy.py`):
- `min_diff`: 2 (–º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –æ—á–∫–æ–≤)
- `max_diff`: 4 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–∞–∑–Ω–∏—Ü–∞ –æ—á–∫–æ–≤)
- `odds_min`: 1.70 (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç)
- `odds_max`: 2.60 (–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç)
- `unit`: 30.0 (–±–∞–∑–æ–≤–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤ —Ä—É–±–ª—è—Ö)

### Scanner:
- `cooldown_seconds`: 180 (cooldown –º–µ–∂–¥—É —Å–∏–≥–Ω–∞–ª–∞–º–∏)
- `stale_threshold`: 60 (—Å–µ–∫—É–Ω–¥—ã –¥–æ –ø–æ–º–µ—Ç–∫–∏ STALE)

## üöÄ –ó–∞–ø—É—Å–∫

### –ò–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤:
```powershell
python run.py
```

### –ò–∑ .exe:
```powershell
.\dist\BB_TT_Scanner.exe
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `./logs/app.log` (—Ä–æ—Ç–∞—Ü–∏—è 10 MB, 7 –¥–Ω–µ–π)
- –ö–æ–Ω—Å–æ–ª—å (stderr, —É—Ä–æ–≤–µ–Ω—å INFO)

## üíæ –î–∞–Ω–Ω—ã–µ

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- `./bb_scanner.db` (SQLite)
- –¢–∞–±–ª–∏—Ü–∞ `signals` —Å –∂—É—Ä–Ω–∞–ª–æ–º –≤—Å–µ—Ö —Å–∏–≥–Ω–∞–ª–æ–≤

### –ü—Ä–æ—Ñ–∏–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:
- `./bb_profile/` (Playwright persistent context)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç cookies, —Å–µ—Å—Å–∏—é, –ª–æ–≥–∏–Ω

---

**–í–µ—Ä—Å–∏—è**: 1.0.0  
**–î–∞—Ç–∞**: 2024



